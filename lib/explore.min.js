"use strict";function probePositions(t,e,o,n){var s=n||"data/probes/",a=new XMLHttpRequest,r=[],i="_solarEcliptic.txt",d=s+t+i;a.open("GET",d,!0),a.onreadystatechange=function(){if(4==a.readyState&&200==a.status){var t=a.responseText;t=t.split("\n");for(var n in t)r.push(t[n].split(/[ ]+/));for(var s=1;s<r.length-1;s++)e.push({x:parseFloat(r[s][2]),y:parseFloat(r[s][4]),z:parseFloat(r[s][3]),year:parseFloat(r[s][0]),day:parseFloat(r[s][1]),jday:jday(parseFloat(r[s][0]),1,1,0,0,0)+parseFloat(r[s][1])});o()}},a.send(null)}function eci_to_geodetic(t,e){for(var o,n=6378.137,s=6356.7523142,a=Math.sqrt(t.x*t.x+t.y*t.y),r=(n-s)/n,i=2*r-r*r,d=Math.atan2(t.y,t.x)-e,c=20,l=0,p=Math.atan2(t.z,Math.sqrt(t.x*t.x+t.y*t.y));c>l;)o=1/Math.sqrt(1-i*(Math.sin(p)*Math.sin(p))),p=Math.atan2(t.z+n*o*i*Math.sin(p),a),l+=1;var h=a/Math.cos(p)-n*o;return{longitude:d,latitude:p,height:h}}function eci_to_ecf(t,e){var o=t.x*Math.cos(e)+t.y*Math.sin(e),n=t.x*-Math.sin(e)+t.y*Math.cos(e),s=t.z;return{x:o,y:n,z:s}}function ecf_to_eci(t,e){var o=t.x*Math.cos(e)-t.y*Math.sin(e),n=t.x*Math.sin(e)+t.y*Math.cos(e),s=t.z;return{x:o,y:n,z:s}}function geodetic_to_ecf(t){var e=t.longitude,o=t.latitude,n=t.height,s=6378.137,a=6356.7523142,r=(s-a)/s,i=2*r-r*r,d=s/Math.sqrt(1-i*(Math.sin(o)*Math.sin(o))),c=(d+n)*Math.cos(o)*Math.cos(e),l=(d+n)*Math.cos(o)*Math.sin(e),p=(d*(1-i)+n)*Math.sin(o);return{x:c,y:l,z:p}}function topocentric(t,e){var o=t.longitude,n=t.latitude,s=(t.height,geodetic_to_ecf(t)),a=e.x-s.x,r=e.y-s.y,i=e.z-s.z,d=Math.sin(n)*Math.cos(o)*a+Math.sin(n)*Math.sin(o)*r-Math.cos(n)*i,c=-Math.sin(o)*a+Math.cos(o)*r,l=Math.cos(n)*Math.cos(o)*a+Math.cos(n)*Math.sin(o)*r+Math.sin(n)*i;return{top_s:d,top_e:c,top_z:l}}function topocentric_to_look_angles(t){var e=t.top_s,o=t.top_e,n=t.top_z,s=Math.sqrt(e*e+o*o+n*n),a=Math.asin(n/s),r=Math.atan2(-o,e)+pi;return{azimuth:r,elevation:a,range_sat:s}}function degrees_long(t){var e=t/pi*180%360;return e>180?e=360-e:-180>e&&(e=360+e),e}function degrees_lat(t){if(t>pi/2||-pi/2>t)return"Err";var e=t/pi*180;return e=0>e?e:e}function ecf_to_look_angles(t,e){var o=topocentric(t,e);return topocentric_to_look_angles(o)}function doppler_factor(t,e,o){function n(t){return t>=0?1:-1}var s=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)+Math.pow(e.z-t.z,2)),a={x:e.x+o.x,y:e.y+o.y,z:e.z+o.z},r=Math.sqrt(Math.pow(a.x-t.x,2)+Math.pow(a.y-t.y,2)+Math.pow(a.z-t.z,2)),i=r-s;i*=n(i);var d=299792.458,c=1+i/d;return c}function rev(t){return t-360*Math.floor(t/360)}function rev2(t){var e=rev(t);return e>=180?e-360:e}function sind(t){return Math.sin(t*DEG2RAD)}function cosd(t){return Math.cos(t*DEG2RAD)}function tand(t){return Math.tan(t*DEG2RAD)}function asind(t){return RAD2DEG*Math.asin(t)}function acosd(t){return RAD2DEG*Math.acos(t)}function atand(t){return RAD2DEG*Math.atan(t)}function atan2d(t,e){return RAD2DEG*Math.atan2(t,e)}function log10(t){return Math.LOG10E*Math.log(t)}function sqr(t){return t*t}function cbrt(t){return Math.pow(t,1/3)}function SGN(t){return 0>t?-1:1}function planet(t,e,o,n,s,a,r,i,d,c,l,p,h,u){this.name=t,this.num=e,this.N=o,this.i=n,this.w=s,this.a=a,this.e=r,this.M=i,this.radius=d,this.oblique=c,this.dayLength=l,this.yearLength=p,this.texColor=h,this.currentPlanetRotation=0,this.rgbColor=u}function planet_xyz(t,e){for(var o=e-2451543.5,n=t.w[0]+t.w[1]*o,s=t.e[0]+t.e[1]*o,a=t.a[0]+t.a[1]*o,r=t.i[0]+t.i[1]*o,i=t.N[0]+t.N[1]*o,d=rev(t.M[0]+t.M[1]*o),c=d+RAD2DEG*s*sind(d)*(1+s*cosd(d)),l=c-(c-RAD2DEG*s*sind(c)-d)/(1-s*cosd(c));Math.abs(c-l)>5e-4;)c=l,l=c-(c-RAD2DEG*s*sind(c)-d)/(1-s*cosd(c));var p,h,u=a*(cosd(l)-s),m=a*Math.sqrt(1-s*s)*sind(l),x=rev(atan2d(m,u)),g=Math.sqrt(u*u+m*m),f=g*(cosd(i)*cosd(x+n)-sind(i)*sind(x+n)*cosd(r)),M=g*(sind(i)*cosd(x+n)+cosd(i)*sind(x+n)*cosd(r)),y=g*(sind(x+n)*sind(r)),v=atan2d(M,f),w=atan2d(y,Math.sqrt(f*f+M*M+y*y));return t.num==JUPITER&&(p=rev(planets[SATURN].M[0]+planets[SATURN].M[1]*o),v+=-.332*sind(2*d-5*p-67.6)-.056*sind(2*d-2*p+21)+.042*sind(3*d-5*p+21)-.036*sind(d-2*p)+.022*cosd(d-p)+.023*sind(2*d-3*p+52)-.016*sind(d-5*p-69),f=g*cosd(v)*cosd(w),M=g*sind(v)*cosd(w)),t.num==SATURN&&(h=rev(planets[JUPITER].M[0]+planets[JUPITER].M[1]*o),v+=.812*sind(2*h-5*d-67.6)-.229*cosd(2*h-4*d-2)+.119*sind(h-2*d-3)+.046*sind(2*h-6*d-69)+.014*sind(h-3*d+32),w+=-.02*cosd(2*h-4*d-2)+.018*sind(2*h-6*d-49),f=g*cosd(v)*cosd(w),M=g*sind(v)*cosd(w),y=g*sind(w)),t.num==URANUS&&(h=rev(planets[JUPITER].M[0]+planets[JUPITER].M[1]*o),p=rev(planets[SATURN].M[0]+planets[SATURN].M[1]*o),v+=.04*sind(p-2*d+6)+.035*sind(p-3*d+33)-.015*sind(h-d+20),f=g*cosd(v)*cosd(w),M=g*sind(v)*cosd(w)),new Array(f,M,y,g,v,w)}function radecr(t,e,o,n){var s=t[0]+e[0],a=t[1]+e[1],r=t[2],i=23.4393-3.563e-7*(o-2451543.5),d=s,c=a*cosd(i)-r*sind(i),l=a*sind(i)+r*cosd(i),p=rev(atan2d(c,d)),h=atan2d(l,Math.sqrt(d*d+c*c)),u=Math.sqrt(d*d+c*c+l*l);return new Array(p,h,u)}function radec2aa(t,e,o,n){var s=rev(280.46061837+360.98564736629*(o-2451545)),a=s+n.longitude,r=a-t,i=asind(sind(n.latitude)*sind(e)+cosd(n.latitude)*cosd(e)*cosd(r)),d=atan2d(sind(r),cosd(r)*sind(n.latitude)-tand(e)*cosd(n.latitude));return new Array(i,rev(d+180),r)}function separation(t,e,o,n){var s=acosd(sind(o)*sind(n)+cosd(o)*cosd(n)*cosd(t-e));.1>s&&(s=Math.sqrt(sqr(rev2(t-e)*cosd((o+n)/2))+sqr(o-n)));var a=atan2d(sind(t-e),cosd(n)*tand(o)-sind(n)*cosd(t-e));return new Array(s,rev(a))}function sunxyz(t){var e=t-2451543.5,o=282.9404+470935e-10*e,n=.016709-1.151e-9*e,s=rev(356.047+.9856002585*e),a=s+n*RAD2DEG*sind(s)*(1+n*cosd(s)),r=cosd(a)-n,i=Math.sqrt(1-n*n)*sind(a),d=atan2d(i,r),c=Math.sqrt(r*r+i*i),l=rev(d+o),p=c*cosd(l),h=c*sind(l);return new Array(p,h,0,c,l,0)}function SunAlt(t,e){var o=sunxyz(t),n=23.4393-3.563e-7*(t-2451543.5),s=o[0],a=o[1]*cosd(n),r=o[1]*sind(n),i=rev(atan2d(a,s)),d=atan2d(r,Math.sqrt(s*s+a*a)),c=radec2aa(i,d,t,e);return new Array(c[0],c[1],c[2],i,d,o[4],0,1,0,o[3],-26.74)}function MoonPos(t,e){var o=(t-2451545)/36525,n=rev(218.3164477+481267.88123421*o),s=rev(297.8501921+445267.1114034*o),a=rev(357.5291092+35999.0502909*o),r=rev(134.9633964+477198.8675055*o),i=rev(93.272095+483202.0175233*o),d=6288774*sind(r)+1274027*sind(2*s-r)+658314*sind(2*s)+213618*sind(2*r)-185116*sind(a)-114332*sind(2*i)+58793*sind(2*s-2*r)+57066*sind(2*s-a-r)+53322*sind(2*s+r)+45758*sind(2*s-a)-40923*sind(a-r)-34720*sind(s)-30383*sind(a+r)+15327*sind(2*s-2*i)-12528*sind(r+2*i)+10980*sind(r-2*i)+10675*sind(4*s-r)+10034*sind(3*r)+8548*sind(4*s-2*r)-7888*sind(2*s+a-r)-6766*sind(2*s+a)-5163*sind(s-r)+4987*sind(s+a)+4036*sind(2*s-a+r),c=5128122*sind(i)+280602*sind(r+i)+277602*sind(r-i)+173237*sind(2*s-i)+55413*sind(2*s-r+i)+46271*sind(2*s-r-i)+32573*sind(2*s+i)+17198*sind(2*r+i)+9266*sind(2*s+r-i)+8822*sind(2*r-i)+8216*sind(2*s-a-i)+4324*sind(2*s-2*r-i)+4200*sind(2*s+r+i),l=-20905355*cosd(r)-3699111*cosd(2*s-r)-2955968*cosd(2*s)-569925*cosd(2*r)+246158*cosd(2*s-2*r)-152138*cosd(2*s-a-r)-170733*cosd(2*s+r)-204586*cosd(2*s-a)-129620*cosd(a-r)+108743*cosd(s)+104755*cosd(a+r)+79661*cosd(r-2*i)+48888*cosd(a),p=rev(n+d/1e6),h=c/1e6,u=23.4393-3.563e-7*(t-2451543.5),m=rev(atan2d(sind(p)*cosd(u)-tand(h)*sind(u),cosd(p))),x=asind(sind(h)*cosd(u)+cosd(h)*sind(u)*sind(p)),g=radec2aa(m,x,t,e),f=Math.abs(180-s-6.289*sind(r)+2.1*sind(a)-1.274*sind(2*s-r)-.658*sind(2*s)-.214*sind(2*r)-.11*sind(s)),M=(1+cosd(f))/2,y=Math.round(385000.56+l/1e3),v=g[0];v-=asind(6378.14/y)*cosd(v);var w,z,A=sunxyz(t),_=A[3],b=y/149598e3,D=.23+5*log10(_*b)+.026*f+4e-9*f*f*f*f;return w=(t+4.867)/29.53059,w-=Math.floor(w),z=.5>w?29.53059*w+14.765295:29.53059*w-14.765295,z=Math.floor(z)+1,new Array(v,g[1],g[2],m,x,p,h,M,_,y,D,z)}function PlanetAlt(t,e,o){if(2==t)return SunAlt(e,o);if(t==MOON)return MoonPos(e,o);if(t==COMET)return CometAlt(e,o);var n=sunxyz(e),s=xpl.SolarSystem(xpl.planets[t],e),a=s[0]+n[0],r=s[1]+n[1],i=s[2]+n[2],d=rev(atan2d(r,a));d+=382394e-10*(e-2451545);var c=atan2d(i,Math.sqrt(a*a+r*r)),l=radecr(s,n,e,o),p=l[0],h=l[1],u=radec2aa(p,h,e,o),m=l[2],x=n[3],g=s[3],f=((g+m)*(g+m)-x*x)/(4*g*m),M=new Array(-.42,-4.4,0,-1.52,-9.4,-8.88,-7.19,-6.87),y=acosd((g*g+m*m-x*x)/(2*g*m)),v=M[t]+5*log10(g*m);switch(t){case MERCURY:v+=y*(.038+y*(-273e-6+2e-6*y));break;case VENUS:v+=y*(9e-4+y*(239e-6-6.5e-7*y));break;case MARS:v+=.016*y;break;case JUPITER:v+=.005*y;break;case SATURN:var w=(e-2451545)/36525,z=28.075216-.012998*w+4e-6*w*w,A=169.50847+1.394681*w+412e-6*w*w,_=asind(sind(z)*cosd(c)*sind(d-A)-cosd(z)*sind(c)),b=s[4],D=s[5],S=atan2d(sind(z)*sind(D)+cosd(z)*cosd(D)*sind(b-A),cosd(D)*cosd(b-A)),E=atan2d(sind(z)*sind(c)+cosd(z)*cosd(c)*sind(d-A),cosd(c)*cosd(d-A)),R=Math.abs(S-E);v+=.044*R-2.6*sind(Math.abs(_))+1.25*sind(_)*sind(_)}return new Array(u[0],u[1],u[2],p,h,d,c,f,g,m,v)}function dpper(t,e){var o,n,s,a,r,i,d,c,l,p,h,u,m,x,g,f,M,y,v,w,z,A,_,b,D,S,E,R,U,T,j,q=(e.inclo,e.init),k=e.ep,C=e.inclp,G=e.nodep,F=e.argpp,P=e.mp,I=e.opsmode,N=t.e3,O=t.ee2,L=t.peo,J=t.pgho,H=t.pho,V=t.pinco,Y=t.plo,B=t.se2,W=t.se3,X=t.sgh2,Z=t.sgh3,K=t.sgh4,Q=t.sh2,$=t.sh3,tt=t.si2,et=t.si3,ot=t.sl2,nt=t.sl3,st=t.sl4,at=t.t,rt=t.xgh2,it=t.xgh3,dt=t.xgh4,ct=t.xh2,lt=t.xh3,pt=t.xi2,ht=t.xi3,ut=t.xl2,mt=t.xl3,xt=t.xl4,gt=t.zmol,ft=t.zmos,Mt=119459e-10,yt=.01675,vt=.00015835218,wt=.0549;T=ft+Mt*at,"y"===q&&(T=ft),U=T+2*yt*Math.sin(T),_=Math.sin(U),p=.5*_*_-.25,h=-.5*_*Math.cos(U),y=B*p+W*h,b=tt*p+et*h,S=ot*p+nt*h+st*_,w=X*p+Z*h+K*_,z=Q*p+$*h,T=gt+vt*at,"y"===q&&(T=gt),U=T+2*wt*Math.sin(T),_=Math.sin(U),p=.5*_*_-.25,h=-.5*_*Math.cos(U),M=O*p+N*h,A=pt*p+ht*h,D=ut*p+mt*h+xt*_,v=rt*p+it*h+dt*_,j=ct*p+lt*h,u=y+M,g=b+A,f=S+D,m=w+v,x=z+j,"n"===q&&(u-=L,g-=V,f-=Y,m-=J,x-=H,C+=g,k+=u,a=Math.sin(C),s=Math.cos(C),C>=.2?(x/=a,m-=s*x,F+=m,G+=x,P+=f):(i=Math.sin(G),r=Math.cos(G),o=a*i,n=a*r,d=x*r+g*s*i,c=-x*i+g*s*r,o+=d,n+=c,G%=twopi,0>G&&"a"===I&&(G+=twopi),E=P+F+s*G,l=f+m-g*G*a,E+=l,R=G,G=Math.atan2(o,n),0>G&&"a"===I&&(G+=twopi),Math.abs(R-G)>pi&&(R>G?G+=twopi:G-=twopi),P+=f,F=E-P-s*G));var zt={ep:k,inclp:C,nodep:G,argpp:F,mp:P};return zt}function dscom(t){var e,o,n,s,a,r,i,d,c,l,p,h,u,m,x,g,f,M,y,v,w,z,A,_,b,D,S,E,R,U,T,j,q,k,C,G,F,P,I,N,O,L,J,H,V,Y,B,W,X,Z,K,Q,$,tt,et,ot,nt,st,at,rt,it,dt,ct,lt,pt,ht,ut,mt,xt,gt,ft,Mt,yt,vt,wt,zt,At=t.epoch,_t=t.ep,bt=t.argpp,Dt=t.tc,St=t.inclp,Et=t.nodep,Rt=t.np,Ut=t.e3,Tt=t.ee2,jt=t.peo,qt=t.pgho,kt=t.pho,Ct=t.pinco,Gt=t.plo,Ft=t.se2,Pt=t.se3,It=t.sgh2,Nt=t.sgh3,Ot=t.sgh4,Lt=t.sh2,Jt=t.sh3,Ht=t.si2,Vt=t.si3,Yt=t.sl2,Bt=t.sl3,Wt=t.sl4,Xt=t.xgh2,Zt=t.xgh3,Kt=t.xgh4,Qt=t.xh2,$t=t.xh3,te=t.xi2,ee=t.xi3,oe=t.xl2,ne=t.xl3,se=t.xl4,ae=t.zmol,re=t.zmos,ie=.01675,de=.0549,ce=29864797e-13,le=4.7968065e-7,pe=.39785416,he=.91744867,ue=.1945905,me=-.98088458,xe=Rt,ge=_t,fe=Math.sin(Et),Me=Math.cos(Et),ye=Math.sin(bt),ve=Math.cos(bt),we=Math.sin(St),ze=Math.cos(St),Ae=ge*ge;p=1-Ae;var _e=Math.sqrt(p);jt=0,Ct=0,Gt=0,qt=0,kt=0;var be=At+18261.5+Dt/1440;A=(4.523602-.00092422029*be)%twopi,m=Math.sin(A),u=Math.cos(A),C=.91375164-.03568096*u,G=Math.sqrt(1-C*C),j=.089683511*m/G,T=Math.sqrt(1-j*j);var De=5.8351514+.001944368*be;F=.39785416*m/G,P=T*u+.91744867*j*m,F=Math.atan2(F,P),F=De+F-A,S=Math.cos(F),E=Math.sin(F),b=ue,D=me,q=he,k=pe,R=Me,U=fe,h=ce,_=1/xe;for(var Se=0;2>Se;)Se+=1,e=b*R+D*q*U,n=-D*R+b*q*U,i=-b*U+D*q*R,d=D*k,c=D*U+b*q*R,l=b*k,o=ze*i+we*d,s=ze*c+we*l,a=-we*i+ze*d,r=-we*c+ze*l,x=e*ve+o*ye,g=n*ve+s*ye,f=-e*ye+o*ve,M=-n*ye+s*ve,y=a*ye,v=r*ye,w=a*ve,z=r*ve,vt=12*x*x-3*f*f,wt=24*x*g-6*f*M,zt=12*g*g-3*M*M,pt=3*(e*e+o*o)+vt*Ae,ht=6*(e*n+o*s)+wt*Ae,ut=3*(n*n+s*s)+zt*Ae,mt=-6*e*a+Ae*(-24*x*w-6*f*y),xt=-6*(e*r+n*a)+Ae*(-24*(g*w+x*z)+-6*(f*v+M*y)),gt=-6*n*r+Ae*(-24*g*z-6*M*v),ft=6*o*a+Ae*(24*x*y-6*f*w),Mt=6*(s*a+o*r)+Ae*(24*(g*y+x*v)-6*(M*w+f*z)),yt=6*s*r+Ae*(24*g*v-6*M*z),pt=pt+pt+p*vt,ht=ht+ht+p*wt,ut=ut+ut+p*zt,rt=h*_,at=-.5*rt/_e,it=rt*_e,st=-15*ge*it,dt=x*f+g*M,ct=g*f+x*M,lt=g*M-x*f,1===Se&&(I=st,N=at,O=rt,L=it,J=dt,H=ct,V=lt,Y=pt,B=ht,W=ut,X=mt,Z=xt,K=gt,Q=ft,$=Mt,tt=yt,et=vt,ot=wt,nt=zt,b=S,D=E,q=C,k=G,R=T*Me+j*fe,U=fe*T-Me*j,h=le);ae=(4.7199672+.2299715*be-De)%twopi,re=(6.2565837+.017201977*be)%twopi,Ft=2*I*H,Pt=2*I*V,Ht=2*N*Z,Vt=2*N*(K-X),Yt=-2*O*B,Bt=-2*O*(W-Y),Wt=-2*O*(-21-9*Ae)*ie,It=2*L*ot,Nt=2*L*(nt-et),Ot=-18*L*ie,Lt=-2*N*$,Jt=-2*N*(tt-Q),Tt=2*st*ct,Ut=2*st*lt,te=2*at*xt,ee=2*at*(gt-mt),oe=-2*rt*ht,ne=-2*rt*(ut-pt),se=-2*rt*(-21-9*Ae)*de,Xt=2*it*wt,Zt=2*it*(zt-vt),Kt=-18*it*de,Qt=-2*at*Mt,$t=-2*at*(yt-ft);var Ee={snodm:fe,cnodm:Me,sinim:we,cosim:ze,sinomm:ye,cosomm:ve,day:be,e3:Ut,ee2:Tt,em:ge,emsq:Ae,gam:De,peo:jt,pgho:qt,pho:kt,pinco:Ct,plo:Gt,rtemsq:_e,se2:Ft,se3:Pt,sgh2:It,sgh3:Nt,sgh4:Ot,sh2:Lt,sh3:Jt,si2:Ht,si3:Vt,sl2:Yt,sl3:Bt,sl4:Wt,s1:st,s2:at,s3:rt,s4:it,s5:dt,s6:ct,s7:lt,ss1:I,ss2:N,ss3:O,ss4:L,ss5:J,ss6:H,ss7:V,sz1:Y,sz2:B,sz3:W,sz11:X,sz12:Z,sz13:K,sz21:Q,sz22:$,sz23:tt,sz31:et,sz32:ot,sz33:nt,xgh2:Xt,xgh3:Zt,xgh4:Kt,xh2:Qt,xh3:$t,xi2:te,xi3:ee,xl2:oe,xl3:ne,xl4:se,nm:xe,z1:pt,z2:ht,z3:ut,z11:mt,z12:xt,z13:gt,z21:ft,z22:Mt,z23:yt,z31:vt,z32:wt,z33:zt,zmol:ae,zmos:re};return Ee}function dsinit(t){var e,o,n,s,a,r,i,d,c,l,p,h,u,m,x,g,f,M,y,v,w,z,A,_,b,D,S,E,R,U,T,j,q,k=t.cosim,C=t.emsq,G=t.argpo,F=t.s1,P=t.s2,I=t.s3,N=t.s4,O=t.s5,L=t.sinim,J=t.ss1,H=t.ss2,V=t.ss3,Y=t.ss4,B=t.ss5,W=t.sz1,X=t.sz3,Z=t.sz11,K=t.sz13,Q=t.sz21,$=t.sz23,tt=t.sz31,et=t.sz33,ot=t.t,nt=t.tc,st=t.gsto,at=t.mo,rt=t.mdot,it=t.no,dt=t.nodeo,ct=t.nodedot,lt=t.xpidot,pt=t.z1,ht=t.z3,ut=t.z11,mt=t.z13,xt=t.z21,gt=t.z23,ft=t.z31,Mt=t.z33,yt=t.ecco,vt=t.eccsq,wt=t.em,zt=t.argpm,At=t.inclm,_t=t.mm,bt=t.nm,Dt=t.nodem,St=t.irez,Et=t.atime,Rt=t.d2201,Ut=t.d2211,Tt=t.d3210,jt=t.d3222,qt=t.d4410,kt=t.d4422,Ct=t.d5220,Gt=t.d5232,Ft=t.d5421,Pt=t.d5433,It=t.dedt,Nt=t.didt,Ot=t.dmdt,Lt=t.dnodt,Jt=t.domdt,Ht=t.del1,Vt=t.del2,Yt=t.del3,Bt=t.xfact,Wt=t.xlamo,Xt=t.xli,Zt=t.xni,Kt=17891679e-13,Qt=21460748e-13,$t=2.2123015e-7,te=17891679e-13,ee=7.3636953e-9,oe=2.1765803e-9,ne=.0043752690880113,se=3.7393792e-7,ae=1.1428639e-7,re=2/3,ie=.00015835218,de=119459e-10;St=0,.0052359877>(bt>.0034906585)&&(St=1),.00924>=(bt>=.00826)&&wt>=.5&&(St=2);var ce=J*de*B,le=H*de*(Z+K),pe=-de*V*(W+X-14-6*C),he=Y*de*(tt+et-6),ue=-de*H*(Q+$);(.052359877>At||At>pi-.052359877)&&(ue=0),0!==L&&(ue/=L);var me=he-k*ue;It=ce+F*ie*O,Nt=le+P*ie*(ut+mt),Ot=pe-ie*I*(pt+ht-14-6*C);var xe=N*ie*(ft+Mt-6),ge=-ie*P*(xt+gt);(.052359877>At||At>pi-.052359877)&&(ge=0),Jt=me+xe,Lt=ue,0!==L&&(Jt-=k/L*ge,Lt+=ge/L);var fe=0;if(E=(st+nt*ne)%twopi,wt+=It*ot,At+=Nt*ot,zt+=Jt*ot,Dt+=Lt*ot,_t+=Ot*ot,0!==St){if(T=Math.pow(bt/xke,re),2===St){j=k*k;var Me=wt;wt=yt;var ye=C;C=vt,q=wt*C,m=-.306-.44*(wt-.64),.65>=wt?(x=3.616-13.247*wt+16.29*C,f=-19.302+117.39*wt-228.419*C+156.591*q,M=-18.9068+109.7927*wt-214.6334*C+146.5816*q,y=-41.122+242.694*wt-471.094*C+313.953*q,v=-146.407+841.88*wt-1629.014*C+1083.435*q,w=-532.114+3017.977*wt-5740.032*C+3708.276*q):(x=-72.099+331.819*wt-508.738*C+266.724*q,f=-346.844+1582.851*wt-2415.925*C+1246.113*q,M=-342.585+1554.908*wt-2366.899*C+1215.972*q,y=-1052.797+4758.686*wt-7193.992*C+3651.957*q,v=-3581.69+16178.11*wt-24462.77*C+12422.52*q,w=wt>.715?-5149.66+29936.92*wt-54087.36*C+31324.56*q:1464.74-4664.75*wt+3763.64*C),.7>wt?(_=-919.2277+4988.61*wt-9064.77*C+5542.21*q,z=-822.71072+4568.6173*wt-8491.4146*C+5337.524*q,A=-853.666+4690.25*wt-8624.77*C+5341.4*q):(_=-37995.78+161616.52*wt-229838.2*C+109377.94*q,z=-51752.104+218913.95*wt-309468.16*C+146349.42*q,A=-40023.88+170470.89*wt-242699.48*C+115605.82*q),b=L*L,e=.75*(1+2*k+j),o=1.5*b,s=1.875*L*(1-2*k-3*j),a=-1.875*L*(1+2*k-3*j),i=35*b*e,d=39.375*b*b,c=9.84375*L*(b*(1-2*k-5*j)+.33333333*(-2+4*k+6*j)),l=L*(4.92187512*b*(-2-4*k+10*j)+6.56250012*(1+2*k-3*j)),p=29.53125*L*(2-8*k+j*(-12+8*k+10*j)),h=29.53125*L*(-2-8*k+j*(12+8*k-10*j)),R=bt*bt,U=T*T,S=3*R*U,D=S*te,Rt=D*e*m,Ut=D*o*x,S*=T,D=S*se,Tt=D*s*f,jt=D*a*M,S*=T,D=2*S*ee,qt=D*i*y,kt=D*d*v,S*=T,D=S*ae,Ct=D*c*w,Gt=D*l*A,D=2*S*oe,Ft=D*p*z,Pt=D*h*_,Wt=(at+dt+dt-E-E)%twopi,Bt=rt+Ot+2*(ct+Lt-ne)-it,wt=Me,C=ye}1===St&&(u=1+C*(-2.5+.8125*C),f=1+2*C,g=1+C*(-6+6.60937*C),e=.75*(1+k)*(1+k),n=.9375*L*L*(1+3*k)-.75*(1+k),r=1+k,r=1.875*r*r*r,Ht=3*bt*bt*T*T,Vt=2*Ht*e*u*Kt,Yt=3*Ht*r*g*$t*T,Ht=Ht*n*f*Qt*T,Wt=(at+dt+G-E)%twopi,Bt=rt+lt-ne+Ot+Jt+Lt-it),Xt=Wt,Zt=it,Et=0,bt=it+fe}var ve={em:wt,argpm:zt,inclm:At,mm:_t,nm:bt,nodem:Dt,irez:St,atime:Et,d2201:Rt,d2211:Ut,d3210:Tt,d3222:jt,d4410:qt,d4422:kt,d5220:Ct,d5232:Gt,d5421:Ft,d5433:Pt,dedt:It,didt:Nt,dmdt:Ot,dndt:fe,dnodt:Lt,domdt:Jt,del1:Ht,del2:Vt,del3:Yt,xfact:Bt,xlamo:Wt,xli:Xt,xni:Zt};return ve}function dspace(t){var e,o,n,s,a,r,i,d,c,l,p=t.irez,h=t.d2201,u=t.d2211,m=t.d3210,x=t.d3222,g=t.d4410,f=t.d4422,M=t.d5220,y=t.d5232,v=t.d5421,w=t.d5433,z=t.dedt,A=t.del1,_=t.del2,b=t.del3,D=t.didt,S=t.dmdt,E=t.dnodt,R=t.domdt,U=t.argpo,T=t.argpdot,j=t.t,q=t.tc,k=t.gsto,C=t.xfact,G=t.xlamo,F=t.no,P=t.atime,I=t.em,N=t.argpm,O=t.inclm,L=t.xli,J=t.mm,H=t.xni,V=t.nodem,Y=t.nm,B=.13130908,W=2.8843198,X=.37448087,Z=5.7686396,K=.95240898,Q=1.8014998,$=1.050833,tt=4.4108898,et=.0043752690880113,ot=720,nt=-720,st=259200,at=0;if(n=(k+q*et)%twopi,I+=z*j,O+=D*j,N+=R*j,V+=E*j,J+=S*j,o=0,0!==p){(0===P||0>=j*P||Math.abs(j)<Math.abs(P))&&(P=0,H=F,L=G),e=j>0?ot:nt;for(var rt=381,it=0;381===rt;)2!==p?(c=A*Math.sin(L-B)+_*Math.sin(2*(L-W))+b*Math.sin(3*(L-X)),i=H+C,d=A*Math.cos(L-B)+2*_*Math.cos(2*(L-W))+3*b*Math.cos(3*(L-X)),d*=i):(l=U+T*P,a=l+l,s=L+L,c=h*Math.sin(a+L-Z)+u*Math.sin(L-Z)+m*Math.sin(l+L-K)+x*Math.sin(-l+L-K)+g*Math.sin(a+s-Q)+f*Math.sin(s-Q)+M*Math.sin(l+L-$)+y*Math.sin(-l+L-$)+v*Math.sin(l+s-tt)+w*Math.sin(-l+s-tt),i=H+C,d=h*Math.cos(a+L-Z)+u*Math.cos(L-Z)+m*Math.cos(l+L-K)+x*Math.cos(-l+L-K)+M*Math.cos(l+L-$)+y*Math.cos(-l+L-$)+2*(g*Math.cos(a+s-Q)+f*Math.cos(s-Q)+v*Math.cos(l+s-tt)+w*Math.cos(-l+s-tt)),d*=i),Math.abs(j-P)>=ot?(it=0,rt=381):(o=j-P,rt=0),381===rt&&(L=L+i*e+c*st,H=H+c*e+d*st,P+=e);Y=H+c*o+d*o*o*.5,r=L+i*o+c*o*o*.5,1!==p?(J=r-2*V+2*n,at=Y-F):(J=r-V-N+n,at=Y-F),Y=F+at}var dt={atime:P,em:I,argpm:N,inclm:O,xli:L,mm:J,xni:H,nodem:V,dndt:at,nm:Y};return dt}function gstime(t){var e=(t-2451545)/36525,o=-62e-7*e*e*e+.093104*e*e+3164400184.812866*e+67310.54841;return o=o*deg2rad/240%twopi,0>o&&(o+=twopi),o}function days2mdhms(t,e){var o=[31,28,31,30,31,30,31,31,30,31,30,31],n=Math.floor(e);t%4===0&&(o=[31,29,31,30,31,30,31,31,30,31,30,31]);for(var s=1,a=0;n>a+o[s-1]&&12>s;)a+=o[s-1],s+=1;var r=s,i=n-a,d=24*(e-n),c=Math.floor(d);d=60*(d-c);var l=Math.floor(d),p=60*(d-l),h={mon:r,day:i,hr:c,minute:l,sec:p};return h}function initl(t){var e,o,n,s,a,r=(t.satn,t.ecco),i=t.epoch,d=t.inclo,c=t.no,l=t.method,p=t.opsmode,h=r*r,u=1-h,m=Math.sqrt(u),x=Math.cos(d),g=x*x;e=Math.pow(xke/c,x2o3),o=.75*j2*(3*g-1)/(m*u);var f=o/(e*e);n=e*(1-f*f-f*(1/3+134*f*f/81)),f=o/(n*n),c/=1+f;var M=Math.pow(xke/c,x2o3),y=Math.sin(d);s=M*u;var v=1-5*g,w=-v-g-g,z=1/M,A=s*s,_=M*(1-r);if(l="n","a"===p){var b=i-7305,D=Math.floor(b+1e-8),S=b-D,E=.017202791694070362,R=1.7321343856509375,U=5.075514194322695e-15,T=E+twopi;a=(R+E*D+T*S+b*b*U)%twopi,0>a&&(a+=twopi)}else a=gstime(i+2433281.5);var j={no:c,method:l,ainv:z,ao:M,con41:w,con42:v,cosio:x,cosio2:g,eccsq:h,omeosq:u,posq:A,rp:_,rteosq:m,sinio:y,gsto:a};return j}function sgp4init(t,e){var o,n,s,a,r,i,d,c,l,p,h,u,m,x,g,f,M,y,v,w,z,A,_,b,D,S,E,R,U,T,j,q,k,C,G,F,P,I,N,O,L,J,H,V,Y,B,W,X,Z,K,Q,$,tt,et,ot,nt,st,at,rt,it,dt,ct,lt,pt,ht,ut,mt,xt,gt,ft,Mt,yt,vt,wt,zt,At,_t,bt=e.opsmode,Dt=e.satn,St=e.epoch,Et=e.xbstar,Rt=e.xecco,Ut=e.xargpo,Tt=e.xinclo,jt=e.xmo,qt=e.xno,kt=e.xnodeo;ct=1.5e-12,t.isimp=0,t.method="n",t.aycof=0,t.con41=0,t.cc1=0,t.cc4=0,t.cc5=0,t.d2=0,t.d3=0,t.d4=0,t.delmo=0,t.eta=0,t.argpdot=0,t.omgcof=0,t.sinmao=0,t.t=0,t.t2cof=0,t.t3cof=0,t.t4cof=0,t.t5cof=0,t.x1mth2=0,t.x7thm1=0,t.mdot=0,t.nodedot=0,t.xlcof=0,t.xmcof=0,t.nodecf=0,t.irez=0,t.d2201=0,t.d2211=0,t.d3210=0,t.d3222=0,t.d4410=0,t.d4422=0,t.d5220=0,t.d5232=0,t.d5421=0,t.d5433=0,t.dedt=0,t.del1=0,t.del2=0,t.del3=0,t.didt=0,t.dmdt=0,t.dnodt=0,t.domdt=0,t.e3=0,t.ee2=0,t.peo=0,t.pgho=0,t.pho=0,t.pinco=0,t.plo=0,t.se2=0,t.se3=0,t.sgh2=0,t.sgh3=0,t.sgh4=0,t.sh2=0,t.sh3=0,t.si2=0,t.si3=0,t.sl2=0,t.sl3=0,t.sl4=0,t.gsto=0,t.xfact=0,t.xgh2=0,t.xgh3=0,t.xgh4=0,t.xh2=0,t.xh3=0,t.xi2=0,t.xi3=0,t.xl2=0,t.xl3=0,t.xl4=0,t.xlamo=0,t.zmol=0,t.zmos=0,t.atime=0,t.xli=0,t.xni=0,t.bstar=Et,t.ecco=Rt,t.argpo=Ut,t.inclo=Tt,t.mo=jt,t.no=qt,t.nodeo=kt,t.operationmode=bt;var Ct=78/radiusearthkm+1,Gt=42/radiusearthkm,Ft=Gt*Gt*Gt*Gt,Pt=2/3;t.init="y",t.t=0;var It={satn:Dt,ecco:t.ecco,epoch:St,inclo:t.inclo,no:t.no,method:t.method,opsmode:t.operationmode},Nt=initl(It);t.no=Nt.no;var Ot=(Nt.method,Nt.ainv,Nt.ao);t.con41=Nt.con41;var Lt=Nt.con42,Jt=Nt.cosio,Ht=Nt.cosio2,Vt=Nt.eccsq,Yt=Nt.omeosq,Bt=Nt.posq,Wt=Nt.rp,Xt=Nt.rteosq,Zt=Nt.sinio;if(t.gsto=Nt.gsto,t.error=0,Yt>=0||t.no>=0){if(t.isimp=0,220/radiusearthkm+1>Wt&&(t.isimp=1),P=Ct,R=Ft,D=(Wt-1)*radiusearthkm,156>D){P=D-78,98>D&&(P=20);var Kt=(120-P)/radiusearthkm;R=Kt*Kt*Kt*Kt,P=P/radiusearthkm+1}S=1/Bt,lt=1/(Ot-P),t.eta=Ot*t.ecco*lt,y=t.eta*t.eta,M=t.ecco*t.eta,E=Math.abs(1-y),p=R*Math.pow(lt,4),h=p/Math.pow(E,3.5),c=h*t.no*(Ot*(1+1.5*y+M*(4+y))+.375*j2*lt/E*t.con41*(8+3*y*(8+y))),t.cc1=t.bstar*c,l=0,t.ecco>1e-4&&(l=-2*p*lt*j3oj2*t.no*Zt/t.ecco),t.x1mth2=1-Ht,t.cc4=2*t.no*h*Ot*Yt*(t.eta*(2+.5*y)+t.ecco*(.5+2*y)-j2*lt/(Ot*E)*(-3*t.con41*(1-2*M+y*(1.5-.5*M))+.75*t.x1mth2*(2*y-M*(1+y))*Math.cos(2*t.argpo))),t.cc5=2*h*Ot*Yt*(1+2.75*(y+M)+M*y),u=Ht*Ht,rt=1.5*j2*S*t.no,it=.5*rt*j2*S,dt=-.46875*j4*S*S*t.no,t.mdot=t.no+.5*rt*Xt*t.con41+.0625*it*Xt*(13-78*Ht+137*u),t.argpdot=-.5*rt*Lt+.0625*it*(7-114*Ht+395*u)+dt*(3-36*Ht+49*u),ht=-rt*Jt,t.nodedot=ht+(.5*it*(4-19*Ht)+2*dt*(3-7*Ht))*Jt,pt=t.argpdot+t.nodedot,t.omgcof=t.bstar*l*Math.cos(t.argpo),t.xmcof=0,t.ecco>1e-4&&(t.xmcof=-Pt*p*t.bstar/M),t.nodecf=3.5*Yt*ht*t.cc1,t.t2cof=1.5*t.cc1,Math.abs(Jt+1)>1.5e-12?t.xlcof=-.25*j3oj2*Zt*(3+5*Jt)/(1+Jt):t.xlcof=-.25*j3oj2*Zt*(3+5*Jt)/ct,t.aycof=-.5*j3oj2*Zt;var Qt=1+t.eta*Math.cos(t.mo);if(t.delmo=Qt*Qt*Qt,t.sinmao=Math.sin(t.mo),t.x7thm1=7*Ht-1,2*pi/t.no>=225){t.method="d",t.isimp=1,st=0,A=t.inclo;var $t={epoch:St,ep:t.ecco,argpp:t.argpo,tc:st,inclp:t.inclo,nodep:t.nodeo,np:t.no,e3:t.e3,ee2:t.ee2,peo:t.peo,pgho:t.pgho,pho:t.pho,pinco:t.pinco,plo:t.plo,se2:t.se2,se3:t.se3,sgh2:t.sgh2,sgh3:t.sgh3,sgh4:t.sgh4,sh2:t.sh2,sh3:t.sh3,si2:t.si2,si3:t.si3,sl2:t.sl2,sl3:t.sl3,sl4:t.sl4,xgh2:t.xgh2,xgh3:t.xgh3,xgh4:t.xgh4,xh2:t.xh2,xh3:t.xh3,xi2:t.xi2,xi3:t.xi3,xl2:t.xl2,xl3:t.xl3,xl4:t.xl4,zmol:t.zmol,zmos:t.zmos},te=dscom($t);n=te.snodm,o=te.cnodm,a=te.sinim,s=te.cosim,i=te.sinomm,r=te.cosomm,m=te.day,t.e3=te.e3,t.ee2=te.ee2,g=te.em,f=te.emsq,v=te.gam,t.peo=te.peo,t.pgho=te.pgho,t.pho=te.pho,t.pinco=te.pinco,t.plo=te.plo,U=te.rtemsq,t.se2=te.se2,t.se3=te.se3,t.sgh2=te.sgh2,t.sgh3=te.sgh3,t.sgh4=te.sgh4,t.sh2=te.sh2,t.sh3=te.sh3,t.si2=te.si2,t.si3=te.si3,t.sl2=te.sl2,t.sl3=te.sl3,t.sl4=te.sl4,T=te.s1,j=te.s2,q=te.s3,k=te.s4,C=te.s5,G=te.s6,F=te.s7,I=te.ss1,N=te.ss2,O=te.ss3,L=te.ss4,J=te.ss5,H=te.ss6,V=te.ss7,Y=te.sz1,B=te.sz2,W=te.sz3,X=te.sz11,Z=te.sz12,K=te.sz13,Q=te.sz21,$=te.sz22,tt=te.sz23,et=te.sz31,ot=te.sz32,nt=te.sz33,t.xgh2=te.xgh2,t.xgh3=te.xgh3,t.xgh4=te.xgh4,t.xh2=te.xh2,t.xh3=te.xh3,t.xi2=te.xi2,t.xi3=te.xi3,t.xl2=te.xl2,t.xl3=te.xl3,t.xl4=te.xl4,b=te.nm,ut=te.z1,mt=te.z2,xt=te.z3,gt=te.z11,ft=te.z12,Mt=te.z13,yt=te.z21,vt=te.z22,wt=te.z23,zt=te.z31,At=te.z32,_t=te.z33,t.zmol=te.zmol,t.zmos=te.zmos;var ee={inclo:A,init:t.init,ep:t.ecco,inclp:t.inclo,nodep:t.nodeo,argpp:t.argpo,mp:t.mo,opsmode:t.operationmode},oe=dpper(t,ee);t.ecco=oe.ep,t.inclo=oe.inclp,t.nodeo=oe.nodep,t.argpo=oe.argpp,t.mo=oe.mp,w=0,z=0,_=0;var ne={cosim:s,emsq:f,argpo:t.argpo,s1:T,s2:j,s3:q,s4:k,s5:C,sinim:a,ss1:I,ss2:N,ss3:O,ss4:L,ss5:J,sz1:Y,sz3:W,sz11:X,sz13:K,sz21:Q,sz23:tt,sz31:et,sz33:nt,t:t.t,tc:st,gsto:t.gsto,mo:t.mo,mdot:t.mdot,no:t.no,nodeo:t.nodeo,nodedot:t.nodedot,xpidot:pt,z1:ut,z3:xt,z11:gt,z13:Mt,z21:yt,z23:wt,z31:zt,z33:_t,ecco:t.ecco,eccsq:Vt,em:g,argpm:w,inclm:A,mm:_,nm:b,nodem:z,irez:t.irez,atime:t.atime,d2201:t.d2201,d2211:t.d2211,d3210:t.d3210,d3222:t.d3222,d4410:t.d4410,d4422:t.d4422,d5220:t.d5220,d5232:t.d5232,d5421:t.d5421,d5433:t.d5433,dedt:t.dedt,didt:t.didt,dmdt:t.dmdt,dnodt:t.dnodt,domdt:t.domdt,del1:t.del1,del2:t.del2,del3:t.del3,xfact:t.xfact,xlamo:t.xlamo,xli:t.xli,xni:t.xni},se=dsinit(ne);g=se.em,w=se.argpm,A=se.inclm,_=se.mm,b=se.nm,z=se.nodem,t.irez=se.irez,t.atime=se.atime,t.d2201=se.d2201,t.d2211=se.d2211,t.d3210=se.d3210,t.d3222=se.d3222,t.d4410=se.d4410,t.d4422=se.d4422,t.d5220=se.d5220,t.d5232=se.d5232,t.d5421=se.d5421,t.d5433=se.d5433,t.dedt=se.dedt,t.didt=se.didt,t.dmdt=se.dmdt,x=se.dndt,t.dnodt=se.dnodt,t.domdt=se.domdt,t.del1=se.del1,t.del2=se.del2,t.del3=se.del3,t.xfact=se.xfact,t.xlamo=se.xlamo,t.xli=se.xli,t.xni=se.xni}1!==t.isimp&&(d=t.cc1*t.cc1,t.d2=4*Ot*lt*d,at=t.d2*lt*t.cc1/3,t.d3=(17*Ot+P)*at,t.d4=.5*at*Ot*lt*(221*Ot+31*P)*t.cc1,t.t3cof=t.d2+2*d,t.t4cof=.25*(3*t.d3+t.cc1*(12*t.d2+10*d)),t.t5cof=.2*(3*t.d4+12*t.cc1*t.d3+6*t.d2*t.d2+15*d*(2*t.d2+d)))}return sgp4(t,0),t.init="n",!0}function twoline2rv(t,e){var o="i",n=1440/(2*pi),s=0,a=0,r=0,i={};i.error=0;parseInt(t.substring(0,1),10);i.satnum=t.substring(2,7);t.substring(7,8),t.substring(9,11);i.epochyr=parseInt(t.substring(18,20),10),i.epochdays=parseFloat(t.substring(20,32)),i.ndot=parseFloat(t.substring(33,43)),i.nddot=parseFloat("."+parseInt(t.substring(44,50),10)+"E"+t.substring(50,52)),i.bstar=parseFloat("."+parseInt(t.substring(53,59),10)+"E"+t.substring(59,61));parseInt(t.substring(62,63),10);a=parseInt(t.substring(64,68),10),i.inclo=parseFloat(e.substring(8,16)),i.nodeo=parseFloat(e.substring(17,25)),i.ecco=parseFloat("."+e.substring(26,33)),i.argpo=parseFloat(e.substring(34,42)),i.mo=parseFloat(e.substring(43,51)),i.no=parseFloat(e.substring(52,63)),s=parseFloat(e.substring(63,68)),i.no=i.no/n,i.a=Math.pow(i.no*tumin,-2/3),i.ndot=i.ndot/(1440*n),i.nddot=i.nddot/(1440*n*1440),i.inclo=i.inclo*deg2rad,i.nodeo=i.nodeo*deg2rad,i.argpo=i.argpo*deg2rad,i.mo=i.mo*deg2rad,i.alta=i.a*(1+i.ecco)-1,i.altp=i.a*(1-i.ecco)-1,r=i.epochyr<57?i.epochyr+2e3:i.epochyr+1900;var d=days2mdhms(r,i.epochdays),c=d.mon,l=d.day,p=d.hr,h=d.minute,u=d.sec;i.jdsatepoch=jday(r,c,l,p,h,u);var m={opsmode:o,satn:i.satnum,epoch:i.jdsatepoch-2433281.5,xbstar:i.bstar,xecco:i.ecco,xargpo:i.argpo,xinclo:i.inclo,xmo:i.mo,xno:i.no,xnodeo:i.nodeo};return sgp4init(i,m),i}function propagate(t,e,o,n,s,a,r){var i=jday(e,o,n,s,a,r),d=(i-t.jdsatepoch)*minutes_per_day;return sgp4(t,d)}function sgp4(t,e){var o,n,s,a,r,i,d,c,l,p,h,u,m,x,g,f,M,y,v,w,z,A,_,b,D,S,E,R,U,T,j,q,k,C,G,F,P,I,N,O,L,J,H,V,Y,B,W,X,Z,K,Q,$,tt,et,ot,nt,st,at,rt,it,dt,ct,lt,pt,ht,ut,mt,xt,gt,ft,Mt,yt,vt=0,wt=1.5e-12,zt=radiusearthkm*xke/60;t.t=e,t.error=0,mt=t.mo+t.mdot*t.t;var At=t.argpo+t.argpdot*t.t;if(ft=t.nodeo+t.nodedot*t.t,T=At,rt=mt,O=t.t*t.t,dt=ft+t.nodecf*O,X=1-t.cc1*t.t,Z=t.bstar*t.cc4*t.t,K=t.t2cof*O,1!==t.isimp){_=t.omgcof*t.t;var _t=1+t.eta*Math.cos(mt);A=t.xmcof*(_t*_t*_t-t.delmo),Y=_+A,rt=mt+Y,T=At-Y,L=O*t.t,J=L*t.t,X=X-t.d2*O-t.d3*L-t.d4*J,Z+=t.bstar*t.cc5*(Math.sin(rt)-t.sinmao),K=K+t.t3cof*L+J*(t.t4cof+t.t*t.t5cof)}it=t.no;var bt=t.ecco;if(at=t.inclo,"d"===t.method){H=t.t;var Dt={irez:t.irez,d2201:t.d2201,d2211:t.d2211,d3210:t.d3210,d3222:t.d3222,d4410:t.d4410,d4422:t.d4422,d5220:t.d5220,d5232:t.d5232,d5421:t.d5421,d5433:t.d5433,dedt:t.dedt,del1:t.del1,del2:t.del2,del3:t.del3,didt:t.didt,dmdt:t.dmdt,dnodt:t.dnodt,domdt:t.domdt,argpo:t.argpo,argpdot:t.argpdot,t:t.t,tc:H,gsto:t.gsto,xfact:t.xfact,xlamo:t.xlamo,no:t.no,atime:t.atime,em:bt,argpm:T,inclm:at,xli:t.xli,mm:rt,xni:t.xni,nodem:dt,nm:it},St=dspace(Dt);St.atime;bt=St.em,T=St.argpm,at=St.inclm;St.xli;rt=St.mm;St.xni;dt=St.nodem,b=St.dndt,it=St.nm}if(0>=it)return t.error=2,[!1,!1];if(o=Math.pow(xke/it,x2o3)*X*X,it=xke/Math.pow(o,1.5),bt-=Z,bt>=1||-.001>bt)return t.error=1,[!1,!1];1e-6>bt&&(bt=1e-6),rt+=t.no*K,ht=rt+T+dt,D=bt*bt,Y=1-D,dt%=twopi,T%=twopi,ht%=twopi,rt=(ht-T-dt)%twopi,i=Math.sin(at),r=Math.cos(at);var Et=bt;if(lt=at,j=T,yt=dt,ut=rt,f=i,g=r,"d"===t.method){var Rt={inclo:t.inclo,init:"n",ep:Et,inclp:lt,nodep:yt,argpp:j,mp:ut,opsmode:t.operationmod},Ut=dpper(t,Rt);if(Et=Ut.ep,lt=Ut.inclp,yt=Ut.nodep,j=Ut.argpp,ut=Ut.mp,0>lt&&(lt=-lt,yt+=pi,j-=pi),0>Et||Et>1)return t.error=3,[!1,!1]}"d"===t.method&&(f=Math.sin(lt),g=Math.cos(lt),t.aycof=-.5*j3oj2*f,Math.abs(g+1)>1.5e-12?t.xlcof=-.25*j3oj2*f*(3+5*g)/(1+g):t.xlcof=-.25*j3oj2*f*(3+5*g)/wt),n=Et*Math.cos(j),Y=1/(o*(1-Et*Et)),s=Et*Math.sin(j)+Y*t.aycof,pt=ut+j+yt+Y*t.xlcof*n,Q=(pt-yt)%twopi,R=Q,V=9999.9;for(var Tt=1;Math.abs(V)>=1e-12&&10>=Tt;)u=Math.sin(R),h=Math.cos(R),V=1-h*n-u*s,V=(Q-s*h+n*u-R)/V,Math.abs(V)>=.95&&(V=V>0?.95:-.95),R+=V,Tt+=1;if(S=n*h+s*u,U=n*u-s*h,E=n*n+s*s,q=o*(1-E),0>q)return t.error=4,[!1,!1];F=o*(1-S),G=Math.sqrt(o)*U/F,I=Math.sqrt(q)/F,a=Math.sqrt(1-E),Y=U/(1+a),z=o/F*(u-s-n*Y),w=o/F*(h-n+s*Y),N=Math.atan2(z,w),p=(w+w)*z,l=1-2*z*z,Y=1/q,B=.5*j2*Y,W=B*Y,"d"===t.method&&(M=g*g,t.con41=3*M-1,t.x1mth2=1-M,t.x7thm1=7*M-1),vt=F*(1-1.5*W*a*t.con41)+.5*B*t.x1mth2*l,N-=.25*W*t.x7thm1*p,Mt=yt+1.5*W*g*p,ct=lt+1.5*W*g*f*l;var jt=G-it*B*t.x1mth2*p/xke;return P=I+it*B*(t.x1mth2*l+1.5*t.con41)/xke,v=Math.sin(N),y=Math.cos(N),c=Math.sin(Mt),d=Math.cos(Mt),x=Math.sin(ct),m=Math.cos(ct),xt=-c*m,gt=d*m,$=xt*v+d*y,tt=gt*v+c*y,et=x*v,ot=xt*y-d*v,nt=gt*y-c*v,st=x*y,k={x:0,y:0,z:0},k.x=vt*$*radiusearthkm,k.y=vt*tt*radiusearthkm,k.z=vt*et*radiusearthkm,C={x:0,y:0,z:0},C.x=(jt*$+P*ot)*zt,C.y=(jt*tt+P*nt)*zt,C.z=(jt*et+P*st)*zt,1>vt?(t.error=6,{position:!1,velocity:!1}):{position:k,velocity:C}}function jday(t,e,o,n,s,a){return"undefined"==typeof t&&(t=0),"undefined"==typeof e&&(e=0),"undefined"==typeof o&&(o=0),"undefined"==typeof n&&(n=0),"undefined"==typeof s&&(s=0),"undefined"==typeof a&&(a=0),computeTheForm(t,e,o,n,s,a)}function computeTheForm(t,e,o,n,s,a){var r=o,i=e,d=t;3>i&&(d--,i+=12);var c=Math.floor(d/100),l=Math.floor(c/4),p=2-c+l,h=Math.floor(365.25*(d+4716)),u=Math.floor(30.6001*(i+1)),m=p+r+h+u-1524.5,x=m+((a/60+s)/60+n)/24;return x}function dateFromJday(t){var e,o,n,s,a,r=Math.floor(t),i=t-r,d=2299161;if(r>=d){var c=Math.floor((r-1867216-.25)/36524.25);e=r+1+c-Math.floor(.25*c)}else e=r;var l=i+.5;l>=1&&(l-=1,++e),o=e+1524,n=Math.floor(6680+(o-2439870-122.1)/365.25),s=Math.floor(365.25*n),a=Math.floor((o-s)/30.6001);var p=Math.floor(o-s-Math.floor(30.6001*a)),h=Math.floor(a-1);h>12&&(h-=12);var u=Math.floor(n-4715);h>2&&--u,0>=u&&--u;var m=Math.floor(24*l),x=Math.floor(60*(24*l-m)),g=60*(60*(24*l-m)-x),f=Math.floor(g);return g-=f,g>.5&&++f,{year:u,month:h,day:p,hour:m,minute:x,sec:f}}var xpl={},satellite={version:"1.2"},categories={newTLE:"tle-new.txt",stations:"stations.txt",visible:"visual.txt",FENGYUNDebris:"1999-025.txt",iridiumDebris:"iridium-33-debris.txt",cosmos2251Debris:"cosmos-2251-debris.txt",BREEZEMDebris:"2012-044.txt",weather:"weather.txt",noaa:"noaa.txt",goes:"goes.txt",earthResources:"resource.txt",searchRescue:"sarsat.txt",disasterMonitor:"dmc.txt",TDRSS:"tdrss.txt",ARGOS:"argos.txt",geostationary:"geo.txt",intelsat:"intelsat.txt",gorizont:"gorizont.txt",raduga:"raduga.txt",molniya:"molniya.txt",iridium:"iridium.txt",orbcomm:"orbcomm.txt",globalstar:"globalstar.txt",amateur:"amateur.txt",experimental:"x-comm.txt",otherComm:"other-comm.txt",GPSOps:"gps-ops.txt",glonassOps:"glo-ops.txt",galileo:"galileo.txt",beidou:"beidou.txt",sbas:"sbas.txt",nnss:"nnss.txt",RussianLEONav:"musson.txt",science:"science.txt",geodetic:"geodetic.txt",engineering:"engineering.txt",education:"education.txt",military:"military.txt",radar:"radar.txt",cubesats:"cubesat.txt",other:"other.txt",classified:"inttles.txt"},nro=["Rhyolite","Vortex","Magnum","Mercury","Mentor","GeoLITE"],airforce=["Canyon","DSP","Milstar","SBIRS","GSSAP"],navy=["FleetSatCom"],jointusmilitary=["DSCS","SDS","Trumpet","USA","Delta4Demo","Mitex","WGS","MUOS","CLIO","ISON"],soviet=["Ekran"],jointothermilitaries=["Sicral","AEHF"],unknown=["UFO","Unknown","UI168","Unknwn"],classifiedCategories=[airforce,nro,navy,jointusmilitary,soviet,unknown,jointothermilitaries];xpl.classifiedMissions=["Rhyolite","Vortex","Magnum","Mercury","Mentor","GeoLITE","Canyon","DSP","Milstar","SBIRS","GSSAP","FleetSatCom","DSCS","SDS","Trumpet","USA","Delta4Demo","Mitex","WGS","MUOS","CLIO","ISON","Ekran","Sicral","AEHF","UFO","Unknown","UI168","Unknwn","96044","UI168"],
xpl.classifiedCategories=classifiedCategories;var xmlhttp=new XMLHttpRequest;xpl.getTLE=function(t,e,o,n){var s,a="",r="http://cors.io/?u=",i="http://www.celestrak.com/NORAD/elements/";return"classified"==t&&(i="",r="","undefined"==typeof n&&(a="../../lib/data/")),t in categories?(s=a+r+i+categories[t],xmlhttp.open("GET",s,!0),xmlhttp.onreadystatechange=function(){if(4==xmlhttp.readyState&&200==xmlhttp.status){var t=xmlhttp.responseText;t=t.split("\n"),t.splice(t.length-1);for(var n=0;n<t.length;n+=3)e.push({id:t[n].replace(/\s/g,""),line1:t[n+1],line2:t[n+2]});o()}},void xmlhttp.send(null)):(console.log("not a valid query"),0)},xpl.batchTLEUpdate=function(t,e){"undefined"==typeof e&&(e=0);for(var o in t)if(t.hasOwnProperty(o)){var n=t[o];n.update(e)}},xpl.planetTex=["mercury","venus","earth_day","mars","jupiter","saturn","uranus","neptune"],xpl.probePositions=function(t,e,o,n){return probePositions(t,e,o,n)},xpl.eci_to_ecf=function(t,e){return eci_to_ecf(t,e)},xpl.ecf_to_eci=function(t,e){return ecf_to_eci(t,e)},satellite.topocentric_to_look_angles=function(t){return topocentric_to_look_angles(t)},satellite.eci_to_geodetic=function(t,e){return eci_to_geodetic(t,e)},satellite.ecf_to_look_angles=function(t,e){return ecf_to_look_angles(t,e)},satellite.geodetic_to_ecf=function(t){return geodetic_to_ecf(t)},satellite.ecf_to_eci=function(t,e){return ecf_to_eci(t,e)},satellite.eci_to_ecf=function(t,e){return eci_to_ecf(t,e)},satellite.degrees_lat=function(t){return degrees_lat(t)},satellite.degrees_long=function(t){return degrees_long(t)},satellite.doppler_factor=doppler_factor,xpl.createGeodetic=function(t,e,o){this.longitude=t*DEG2RAD,this.latitude=e*DEG2RAD,this.height=o};var DEG2RAD=Math.PI/180,RAD2DEG=180/Math.PI;xpl.DEG2RAD=DEG2RAD,xpl.RAD2DEG=RAD2DEG,xpl.translatePositions=function(t,e){var o=[];if(null!==t&&e.length==t.length)for(var n=0;n<t.length;n++)o.push(e[n]+t[n]);return o};var MERCURY=0,VENUS=1,EARTH=2,MARS=3,JUPITER=4,SATURN=5,URANUS=6,NEPTUNE=7,SUN=9,MOON=10,COMET=15,USER=20,ndiam=[6.72,16.68,1,9.36,196.88,165.46,70.04,67,1,1919.3,7169e5];planet.prototype.rotationAt=function(t){var e=t%(this.dayLength/23.9344)*2*Math.PI+.04363323127;return e},xpl.sol={radius:696300,dayLength:587.28,texColor:16777028,rgbColor:{r:255,g:255,b:68}},xpl.mercury=new planet("Mercury",0,new Array(48.3313,324587e-10),new Array(7.0047,5e-8),new Array(29.1241,101444e-10),new Array(.387098,0),new Array(.205635,5.59e-10),new Array(168.6562,4.0923344368),1219.75,.01,4222.6,87.969,16777215,{r:255,g:255,b:255}),xpl.venus=new planet("Venus",1,new Array(76.6799,24659e-9),new Array(3.3946,2.75e-8),new Array(54.891,138374e-10),new Array(.72333,0),new Array(.006773,-1.302e-9),new Array(48.0052,1.6021302244),6052,177.4,2802,224.701,16750899,{r:255,g:153,b:51}),xpl.curEarthOblique=function(t){var e;e="undefined"==typeof t?xpl.now:t;var o=(e-2451545)/365.25/1e4,n=23.43929-1.300258*o-.0004305556*Math.pow(o,2)+.5553472*Math.pow(o,3)-.01427222*Math.pow(o,4)-.06935278*Math.pow(o,5)-.01084722*Math.pow(o,6)+.001977778*Math.pow(o,7)+.007741667*Math.pow(o,8)+.001608333*Math.pow(o,9)+.0006805556*Math.pow(o,10);return n};var eObl=xpl.curEarthOblique(xpl.now);xpl.earth=new planet("Earth",2,new Array(0,0),new Array(0,0),new Array(282.9404,470935e-10),new Array(-1,0),new Array(.016709,-1.151e-9),new Array(356.047,.9856002585),6378,eObl,23.9344,365.256,65433,{r:0,g:255,b:153}),xpl.mars=new planet("Mars",3,new Array(49.5574,211081e-10),new Array(1.8497,-1.78e-8),new Array(286.5016,292961e-10),new Array(1.523688,0),new Array(.093405,2.516e-9),new Array(18.6021,.5240207766),3396,25.2,24.7,686.98,16711680,{r:255,g:0,b:0}),xpl.jupiter=new planet("Jupiter",4,new Array(100.4542,276854e-10),new Array(1.303,-1.557e-7),new Array(273.8777,164505e-10),new Array(5.20256,0),new Array(.048498,4.469e-9),new Array(19.895,.0830853001),71492,3.1,9.9,4332.589,16731528,{r:255,g:77,b:136}),xpl.saturn=new planet("Saturn",5,new Array(113.6634,23898e-9),new Array(2.4886,-1.081e-7),new Array(339.3939,297661e-10),new Array(9.55475,0),new Array(.055546,-9.499e-9),new Array(316.967,.0334442282),60268,26.7,10.7,10759.22,10551040,{r:160,g:255,b:0}),xpl.uranus=new planet("Uranus",6,new Array(74.0005,13978e-9),new Array(.7733,1.9e-8),new Array(96.6612,30565e-9),new Array(19.18171,-1.55e-8),new Array(.047318,7.45e-9),new Array(142.5905,.011725806),25559,97.8,17.2,30685.4,22015,{r:0,g:85,b:255}),xpl.neptune=new planet("Neptune",7,new Array(131.7806,30173e-9),new Array(1.77,-2.55e-7),new Array(272.8461,-6027e-9),new Array(30.05826,3.313e-8),new Array(.008606,2.15e-9),new Array(260.2471,.005995147),24764,28.3,16.1,60189,7536793,{r:115,g:0,b:153});var planets=[xpl.mercury,xpl.venus,xpl.earth,xpl.mars,xpl.jupiter,xpl.saturn,xpl.uranus,xpl.neptune];xpl.planets=planets;for(var p in planets)planets[p].rotationAt(xpl.now);xpl.SolarSystem=function(t,e){return planet_xyz(t,e)},xpl.radecr=function(t,e,o,n){return radecr(t,e,o,n)},xpl.radec2aa=function(t,e,o,n){return radec2aa(t,e,o,n)},xpl.MoonPos=function(t,e){return MoonPos(t,e)},xpl.PlanetAlt=function(t,e,o){return PlanetAlt(t,e,o)};var pi=Math.PI,twopi=2*pi,deg2rad=pi/180,rad2deg=180/pi,minutes_per_day=1440,mu=398600.5,radiusearthkm=6378.137,xke=60/Math.sqrt(radiusearthkm*radiusearthkm*radiusearthkm/mu),tumin=1/xke,j2=.00108262998905,j3=-253215306e-14,j4=-161098761e-14,j3oj2=j3/j2,x2o3=2/3;satellite.jday=function(t,e,o,n,s,a){return jday(t,e,o,n,s,a)},satellite.gstime_from_jday=function(t){return gstime(t)},satellite.gstime_from_date=function(t,e,o,n,s,a){var r=jday(t,e,o,n,s,a);return gstime(r)},satellite.twoline2satrec=function(t,e){return twoline2rv(t,e)},satellite.propagate=function(t,e,o,n,s,a,r){return propagate(t,e,o,n,s,a,r)},satellite.sgp4=function(t,e){return sgp4(t,e)},xpl.satellite=satellite;var scl=1;xpl.setScale=function(t){scl=t},xpl.getScale=function(){return scl},xpl.scaleVec3=function(t){var e=t.x*scl,o=t.y*scl,n=t.z*scl;return{x:e,y:o,z:n}},xpl.scaleArray=function(t){var e=[];for(var o in t)e.push(t[o]*scl);return e},xpl.scalef=function(t){return t*scl},xpl.kmtoau=function(t){return 6.6846e-9*t},xpl.daysToSeconds=function(t){return t/1157407e-11},xpl.hoursToSeconds=function(t){return 3600*t},xpl.minutesToSeconds=function(t){return 60*t},xpl.secondsToDays=function(t){return 1157407e-11*t},xpl.secondsToHours=function(t){return t/3600},xpl.secondsToMinutes=function(t){return t/60},xpl.jday=function(t,e,o,n,s,a){return jday(t,e,o,n,s,a)},xpl.dateFromJday=function(t){return dateFromJday(t)};var now=new Date;xpl.now=jday(now.getUTCFullYear(),now.getUTCMonth()+1,now.getUTCDate(),now.getUTCHours(),now.getUTCMinutes(),now.getUTCSeconds()),xpl.updateTime=function(t){var e="undefined"!=typeof t?e:0,o=new Date;xpl.now=jday(o.getUTCFullYear(),o.getUTCMonth()+1,o.getUTCDate(),o.getUTCHours(),o.getUTCMinutes(),o.getUTCSeconds()+e)},xpl.tle=function(t,e,o){"undefined"==typeof o?this.name="":this.name=o,this.line1=t,this.line2=e,this.deltaSeconds=0,this.update=function(t){"undefined"==typeof t&&(t=0);var e=xpl.satellite.twoline2satrec(this.line1,this.line2),o=xpl.satellite.gstime_from_jday(xpl.now+t),n=new Date;n.setSeconds(n.getSeconds()+86400*t);var s=xpl.satellite.propagate(e,n.getUTCFullYear(),n.getUTCMonth()+1,n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds()),a=s.position,r=s.velocity,i=xpl.satellite.eci_to_geodetic(a,o);i.longitude=i.longitude,i.latitude=i.latitude,i.height=i.height,i.longitudeDeg=i.longitude*RAD2DEG,i.latitudeDeg=i.latitude*RAD2DEG,this.latlongalt=i,this.position_ecf=xpl.satellite.geodetic_to_ecf(this.latlongalt),this.position_eci=a,this.velocity_eci=r},this.getLookAnglesFrom=function(t,e,o){var n=new xpl.createGeodetic(t,e,o),s=(xpl.satellite.geodetic_to_ecf(n),xpl.satellite.ecf_to_look_angles(n,this.position_ecf));return s.azimuth*=RAD2DEG,s.elevation*=RAD2DEG,s}};